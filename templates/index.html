{%load staticfiles%}
<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Ontological analysis of OMIM phenotypes</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
                <script src="{% static 'javascript/jquery.min.js' %} "></script>
                <script src="{% static 'javascript/jquery-ui.js' %} "></script>
                <script src="{% static 'javascript/jquery.scrollzer.min.js' %}"></script>
                <script src="{% static 'javascript/jquery.scrolly.min.js' %}"></script>
                <script src="{% static 'javascript/skel.min.js' %}"></script>
                <script src="{% static 'javascript/skel-layers.min.js' %}"></script>
                <script src="{% static 'javascript/init.js' %}"></script>
                <script src="{% static 'javascript/blockui.js' %}"></script>
                <script src="{% static 'javascript/utils.js' %}"></script>

                
                <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css"/>

                <link rel="stylesheet" href="{% static 'css/skel.css' %}" />
                <link rel="stylesheet" href="{% static 'css/style.css' %}" />
                <link rel="stylesheet" href="{% static 'css/style-xlarge.css' %}" />
                <!--[if lte IE 8]><link rel="stylesheet" href="{% static 'css/ie/v8.css' %}" /><![endif]-->
	</head>
    <style>
        .hover_change{
             cursor: pointer; cursor: hand;
        }
    </style>

<script>

$(document).ready(function() {

            $( "#diseaseA_input" ).autocomplete({ 
                "delay": 0, 
                "minLength": 2, 
                "select": function( event, ui ) {
                    $("#diseaseA_hidden" ).val( ui.item.value);
                    $("#diseaseA_input" ).val( ui.item.label);
                    return false;
                },
                "source": function(request, response) { 
                    $.ajax({ 
                        url: "{% url 'get_entities' %}",  
                        dataType: "json", 
                        data: { 
                            term: request.term, 
                        }, 
                        success: function(data) { 
                            response(data); 
                        } ,
                        error: function(data, status, xhr) {
                            console.log(data);
                            alert('Something has gone wrong. Please click OK and try again');
                        },
                    }); 
                }, 

            }); 

            $( "#diseaseB_input" ).autocomplete({ 
                "delay": 0, 
                "minLength": 2, 
                "select": function( event, ui ) {
                    $("#diseaseB_hidden" ).val(ui.item.value);
                    $("#diseaseB_input" ).val(ui.item.label);
                    return false;
                },
                "source": function(request, response) { 
                    $.ajax({ 
                        url: "{% url 'get_entities' %}",  
                        dataType: "json", 
                        data: { 
                            term: request.term, 
                        }, 
                        success: function(data) { 
                            response(data); 
                        },
                        error: function(data, status, xhr) {
                            console.log(data);
                            alert('Something has gone wrong. Please click OK and try again');
                        },
                    }); 
                }, 
            }); 

            $( "#disease_explore" ).autocomplete({ 
                "delay": 0, 
                "minLength": 2, 
                "select": function( event, ui ) {
                    $("#disease_explore_hidden" ).val( ui.item.value);
                    $("#disease_explore" ).val( ui.item.label);
                    return false;
                },
                "source": function(request, response) { 
                    $.ajax({ 
                        url: "{% url 'get_entities' %}",  
                        dataType: "json", 
                        data: { 
                            term: request.term, 
                        }, 
                        success: function(data) { 
                            response(data); 
                        },
                        error: function(data, status, xhr) {
                            console.log(data);
                            alert('Something has gone wrong. Please click OK and try again');
                        },
                    }); 
                }, 
            }); 
    
    $("#searchForm").submit(function(e){
        window.location.href = "/disimweb/score/"+$("#diseaseA_hidden").val()+"/"+$("#diseaseB_hidden").val();
        return false;
    });

    $("#exploreForm").submit(function(e){
        var url = "{% url 'explore' 999999 %}".replace (999999, $("#disease_explore_hidden").val());
        window.location.href = url;
        return false;
    });


    //message boxes to explain the file formats.
    $( ".dialog" ).dialog({ 
        resizable: false,
        autoOpen: false ,
        draggable: false,
        width: 500,
        maxWidth: 300,
        minWidth: 300,
        buttons: [
         {
             text: "Close",
             click: function() {
                 $( this ).dialog( "close" );
             }
         }
         ]
    });

    $( "#triplet_file" ).click(function() {
        $( "#dialog_triplet_format" ).dialog( "open" );
    });

    $( "#matrix_file" ).click(function() {
        $( "#dialog_matrix_format" ).dialog( "open" );
    });

    $( "#mimmesh_file" ).click(function() {
        $( "#dialog_mim_to_mesh").dialog( "open" );
    });

});
</script>

	<body>
		<div id="wrapper">

			<!-- Header -->
				<section id="header" class="skel-layers-fixed">
					<header>
                                        <span class="image avatar"><img src="{% static 'images/logo.png' %}" alt="" /></span>
						<h1 id="logo"><a href="#">Disimweb</a></h1>
						<p>A disease similarity browser</p>
					</header>
					<nav id="nav">
						<ul>
							<li><a href="#one" class="active">Home</a></li>
							<li><a href="#two">Search</a></li>
							<li><a href="#three">Explore</a></li>
							<li><a href="#four">Download</a></li>
                            <li><a href="#five">Acknowledgments</a></li>
						</ul>
					</nav>
                    <footer>
                        <div id="logo_inst">
                            <a href="http://www.cs.rhul.ac.uk"><img src="{% static 'images/rhullogo.png' %}" /></a>
                            <a href="http://www.paccanarolab.org"><img src="{% static 'images/paccanarolab.png' %}" /></a>
                        </div>
						<ul class="icons">
							<li><a href="mailto:support@paccanarolab.org" class="icon fa-envelope"><span class="label">Email</span></a></li>
						</ul>
					</footer>
				</section>

			<!-- Main -->
				<div id="main">

					<!-- One -->
						<section id="one">
							<div class="container">
								<header class="major">
									<h2>An ontological approach to disease similarities</h2>
								</header>
                                                                <p> Our similarity browser provides an intuitive interface to access our 
                                                                disease similarity calculations. The result of a query is a number that 
                                                                quantifies how similar two disease are at a molecular level while exclusively 
                                                                using phenotypic information. </p>
                                                                <p>  By mining the publications related to each OMIM record, we can use the high 
                                                                quality descriptors the MeSH vocabulary provides to describe the publications. Combining 
                                                                these data with the PaccanaroLab expertise in semantic similarity calculations enables 
                                                                us to take full advantage of MeSH's high quality ontological structure and provide a very 
                                                                accurate and highly covering disease similarity measure.</p>
                                                                <p>
                                                                If you found our data useful, please cite:<br/>
                                                                Measuring disease similarity through ontological analysis of phenotypes<br/>
                                                                Horacio Caniza, Alfonso E. Romero, Alberto Paccanaro. 
                                                                </p>
							</div>
						</section>
						
					<!-- Two -->
						<section id="two">
							<div class="container">
                                                            <h3>Search similarities</h3>
                                                            <p>Search all available diseases. We cover 7545 diseaes in OMIM, which amouts to 
                                                            97% of the entire dataset. <br/>
                                                             You can start typing the name of the disease, and then
                                                             select the one you want from the choices available. Once the 'Search' button is pressed, we will 
                                                             redirect you to the results page.</p>
                                                        <form id="searchForm">
                                                            <input class = "autocomplete_box" id="diseaseA_input"  required="" placeholder="Disease name" name="diseaseA_input" type="text" size="40"/>
                                                            <br/>
                                                            <input class = "autocomplete_box" id="diseaseB_input" required = "" placeholder="Disease name" name="diseaseB_input" type="text" size="40"/>
                                                            <!--to store the results of the selection-->
                                                            <input id="diseaseA_hidden"  type="hidden" value=""/>
                                                            <input id="diseaseB_hidden"  type="hidden" value=""/>
                                                            <br/>
                                                            <input type="submit" value="Search"/>
                                                        </form>
							</div>
						</section>
						
					<!-- Three -->
						<section id="three">
							<div class="container">
								<h3>Explore!</h3>
                                                                <p> We have developed a way to explore a diseases' neighbourhood. Select the 
                                                                disease you want by typing its name, and select one from the 
                                                                dropdown list<br/>
                                                                After you click 'Explore' we will redirect you to the result page, where 
                                                                further exploration is possible</p>
                                                            <form id="exploreForm">
                                                                <input class = "autocomplete_box" id="disease_explore" required="" placeholder="Disease name" name="disease_explore" type="text" size="40"/>
                                                                <input id="disease_explore_hidden"  type="hidden"/>
                                                                <br/>
                                                                <input type="submit" value="Explore the neighbourhood"/>
                                                            </form>
                                                         </div> <!--container-->
						</section>
						
				
					<!-- Four -->
						<section id="four">
                                        <div class="container">
                                            <h3>Download</h3>
                                            

                                            <ul class="fa-ul">
                                                <li><i class="fa-li fa fa-download fa-border"></i><a href="http://www.paccanarolab.org/static_content/disease_similarity/combined_similarity_matrix.tsv">Disease similarity file in matrix form</a> <i id = "matrix_file"class ="fa fa-question fa-border hover_change"></i> </li>
                                                <li><i class="fa-li fa fa-download fa-border"></i><a href="http://www.paccanarolab.org/static_content/disease_similarity/combined_similarity_triplet.tsv">Disease similarity file in triplet form</a> <i id = "triplet_file" class ="fa fa-question fa-border hover_change"></i> </li>
                                                <li><i class="fa-li fa fa-download fa-border"></i><a href="http://www.paccanarolab.org/static_content/disease_similarity/mim2mesh.tsv">OMIM to MeSH mapping</a><i id = "mimmesh_file"class ="fa fa-question fa-border hover_change"></i> </li>
                                            </ul>

                                            This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
                                            <p>
                                            The source code for the disease simiarity browser is available through 
                                            <a href="https://github.com/pwac092/disimweb">GitHub repository.</a>
                                            </p>
                                            <div class="dialog" id="dialog_matrix_format" title="Matrix file">
                                                The matrix file presents all results in a square real marix. Every 
                                                row and every column corresponds to a disease in OMIM. The corresponding 
                                                cell between a row and a column contains a real value which represents the 
                                                similarity between the respective diseases.
                                            </div>
                                            <div class="dialog" id="dialog_triplet_format" title="Triplet file">
                                                The list file shows the similarity between two elements by pairing them 
                                                up one by one. Every line consists of three columns. 
                                                In case you selected a genewise calculation:
                                                <ul>
                                                    <li> Column 1 are UniProt ids </li>
                                                    <li> Column 2 are UniProt ids </li>
                                                    <li> Column 3 contains the value representing the similarity between 
                                                    the elements in column 1 and column 2</li>
                                                </ul>
                                            </div>
                                            <div class="dialog" id="dialog_mim_to_mesh" title="OMIM to MeSH mapping">
                                                The OMIM to MeSH file is a tab separated file in which the first column
                                                is the OMIM disease identifier and the remaining columns are the MeSH
                                                terms unique identifiers assigned to it.
                                            </div>
                                    </div>


                        </section>

						<section id="five">
                              <div class="container">
                                    <h3>Acknowledgments</h3>
                                    <p>
                                        I would like to thank Dr. Alfonso E. Romero for his help developing this browser. Juan Caceres provided help debugging the 
                                        JavaScript and HTML.  Mateo Torres provided helped conceptualise the browser and provided feedback once it was completed. 
                                    <br>
                                    <a href="http://www.cs.rhul.ac.uk/~pwac092/">I kinda did the rest <i class="fa fa-smile-o"></i></a>
                                    </p>
                              </div>
                        </section>


			<!-- Footer -->
                            <section id="footer">
                                    <div class="container">
                                            <ul class="copyright">
                                                    <li>&copy; Disimweb - A disease similarity browser. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                                            </ul>
                                    </div>
                            </section>
			
		</div>
	</body>
</html>
